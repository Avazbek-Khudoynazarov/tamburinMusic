import{D as e,V as C,$ as D,X as M,F as u,Y as W,Z as S,bn as G,W as _,ah as H,c3 as V,r as g,T as f,ak as L,dD as A,a6 as Q,dH as K,bo as Y,N as U,c4 as q,aj as X,bg as Z,e5 as J,e6 as ee,e7 as te,e8 as re,e9 as se,a0 as ne,dE as T,ab as oe,R as ae}from"./index-DJm73Gd8.js";import{P as ie,u as le,C as ce,a as de}from"./product-review-new-form-Dg_5Krwz.js";import{u as pe}from"./use-debounce-B63VF-1e.js";import{E as xe}from"./empty-content-C5UHTerm.js";import{c as $}from"./format-number-BdgaU6hH.js";import{L as E}from"./label-Devs2yXx.js";import{I as he}from"./image-DPed605N.js";import{a as me,C as ue}from"./color-preview-JllbmsmC.js";import{u as z}from"./incrementer-button-C0DdImHt.js";import{C as ge}from"./Card-DCic7xzO.js";import{F as je}from"./Fab-CgmZqP3o.js";import{P as be,p as ye}from"./Pagination-DbFHjtRs.js";import{u as fe,M as Ce,i as Re,F as B,C as Se,a as w}from"./ko-DBbRYMOz.js";import{C as ve}from"./custom-popover-Dq5TA9U0.js";import{M as ke,T as Pe,e as Ie}from"./TextField-B_joUv90.js";import{m as we,p as Fe}from"./html-to-markdown-h9-3Gqz-.js";import{A as Oe,R as Te,S as Le}from"./fields-DRFNYTBH.js";import{I as Ae}from"./InputAdornment-B7kdQGsa.js";import{A as $e}from"./Avatar-CHZSgeuZ.js";import{R as Ee}from"./Rating-CEq9eddU.js";import{F as Be,a as F,c as O}from"./filters-result-BoxdpRFv.js";import"./carousel-progress-bar-Dj7SoJA1.js";import"./index-B_i2wJma.js";import"./index-DXqQCM1T.js";import"./schema-helper-B8SOemTF.js";import"./form-provider-Bv2QLm_X.js";import"./DialogTitle-DFqHFKNV.js";import"./LoadingButton-8OnUjDzw.js";import"./ListContext-CDIiNrC7.js";import"./LastPage-Cd_46hef.js";import"./AuthService-foVeZrRB.js";import"./visuallyHidden-Dan1xhjv.js";import"./DatePicker-CkfG7Gz3.js";import"./listItemButtonClasses-QLc47q-U.js";import"./Tabs-BcQ-S5hI.js";import"./KeyboardArrowRight-S08dGk5c.js";function Ne({product:t}){const x=z(),{id:a,name:n,coverUrl:r,price:c,colors:d,available:i,sizes:o,priceSale:l,newLabel:p,saleLabel:h}=t,m=W.product.details(a),b=async()=>{const y={id:a,name:n,coverUrl:r,available:i,price:c,colors:[d[0]],size:o[0],quantity:1};try{x.onAddToCart(y)}catch(s){console.error(s)}},v=(p.enabled||h.enabled)&&e.jsxs(C,{direction:"row",alignItems:"center",spacing:1,sx:{position:"absolute",zIndex:9,top:16,right:16},children:[p.enabled&&e.jsx(E,{variant:"filled",color:"info",children:p.content}),h.enabled&&e.jsx(E,{variant:"filled",color:"error",children:h.content})]}),k=e.jsxs(u,{sx:{position:"relative",p:1},children:[!!i&&e.jsx(je,{color:"warning",size:"medium",className:"add-cart-btn",onClick:b,sx:{right:16,bottom:16,zIndex:9,opacity:0,position:"absolute",transition:y=>y.transitions.create("all",{easing:y.transitions.easing.easeInOut,duration:y.transitions.duration.shorter})},children:e.jsx(S,{icon:"solar:cart-plus-bold",width:24})}),e.jsx(G,{title:!i&&"Out of stock",placement:"bottom-end",children:e.jsx(he,{alt:n,src:r,ratio:"1/1",sx:{borderRadius:1.5,...!i&&{opacity:.48,filter:"grayscale(1)"}}})})]}),P=e.jsxs(C,{spacing:2.5,sx:{p:3,pt:2},children:[e.jsx(D,{component:M,href:m,color:"inherit",variant:"subtitle2",noWrap:!0,children:n}),e.jsxs(C,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(me,{colors:d}),e.jsxs(C,{direction:"row",spacing:.5,sx:{typography:"subtitle1"},children:[l&&e.jsx(u,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through"},children:$(l)}),e.jsx(u,{component:"span",children:$(c)})]})]})]});return e.jsxs(ge,{sx:{"&:hover .add-cart-btn":{opacity:1}},children:[v,k,P]})}function We({products:t,loading:x,...a}){const n=e.jsx(ie,{}),r=t.map(c=>e.jsx(Ne,{product:c},c.id));return e.jsxs(e.Fragment,{children:[e.jsx(u,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},...a,children:x?n:r}),t.length>8&&e.jsx(be,{count:8,sx:{mt:{xs:5,md:8},[`& .${ye.ul}`]:{justifyContent:"center"}}})]})}function Ge({sort:t,onSort:x,sortOptions:a}){var c;const n=fe(),r=(c=a.find(d=>d.value===t))==null?void 0:c.label;return e.jsxs(e.Fragment,{children:[e.jsxs(_,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:e.jsx(S,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Sort by:",e.jsx(u,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:r})]}),e.jsx(ve,{open:n.open,anchorEl:n.anchorEl,onClose:n.onClose,children:e.jsx(ke,{children:a.map(d=>e.jsx(Ce,{selected:d.value===t,onClick:()=>{n.onClose(),x(d.value)},children:d.label},d.value))})})]})}function _e({query:t,results:x,onSearch:a,loading:n}){const r=H(),c=i=>{r.push(W.product.details(i))},d=i=>{if(t&&i.key==="Enter"){const o=x.filter(l=>l.name===t)[0];c(o.id)}};return e.jsx(Oe,{sx:{width:{xs:1,sm:260}},loading:n,autoHighlight:!0,popupIcon:null,options:x,onInputChange:(i,o)=>a(o),getOptionLabel:i=>i.name,noOptionsText:e.jsx(Re,{query:t}),isOptionEqualToValue:(i,o)=>i.id===o.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${V.option}`]:{pl:.75}}}},renderInput:i=>e.jsx(Pe,{...i,placeholder:"Search...",onKeyUp:d,InputProps:{...i.InputProps,startAdornment:e.jsx(Ae,{position:"start",children:e.jsx(S,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[n?e.jsx(S,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,i.InputProps.endAdornment]})}}),renderOption:(i,o,{inputValue:l})=>{const p=we(o.name,l),h=Fe(o.name,p);return g.createElement(u,{component:"li",...i,onClick:()=>c(o.id),key:o.id},e.jsx($e,{alt:o.name,src:o.coverUrl,variant:"rounded",sx:{mr:1.5,width:48,height:48,flexShrink:0,borderRadius:1}},o.id),e.jsx("div",{children:h.map((m,b)=>e.jsx(f,{component:"span",color:m.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:m.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:m.text},b))},l))}})}function Ue({open:t,onOpen:x,onClose:a,canReset:n,filters:r,options:c}){const d=[...Array(21)].map((s,j)=>{const R=j*10,I=j===0?`$${R}`:`${R}`;return{value:R,label:j%4?"":I}}),i=g.useCallback(s=>{const j=r.state.gender.includes(s)?r.state.gender.filter(R=>R!==s):[...r.state.gender,s];r.setState({gender:j})},[r]),o=g.useCallback(s=>{r.setState({category:s})},[r]),l=g.useCallback(s=>{r.setState({colors:s})},[r]),p=g.useCallback((s,j)=>{r.setState({priceRange:j})},[r]),h=g.useCallback(s=>{r.setState({rating:s})},[r]),m=e.jsxs(e.Fragment,{children:[e.jsxs(u,{display:"flex",alignItems:"center",sx:{py:2,pr:1,pl:2.5},children:[e.jsx(f,{variant:"h6",sx:{flexGrow:1},children:"Filters"}),e.jsx(G,{title:"Reset",children:e.jsx(L,{onClick:r.onResetState,children:e.jsx(A,{color:"error",variant:"dot",invisible:!n,children:e.jsx(S,{icon:"solar:restart-bold"})})})}),e.jsx(L,{onClick:a,children:e.jsx(S,{icon:"mingcute:close-line"})})]}),e.jsx(Q,{sx:{borderStyle:"dashed"}})]}),b=e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsx(f,{variant:"subtitle2",sx:{mb:1},children:"Gender"}),c.genders.map(s=>e.jsx(B,{control:e.jsx(Se,{checked:r.state.gender.includes(s.label),onClick:()=>i(s.label)}),label:s.label},s.value))]}),v=e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsx(f,{variant:"subtitle2",sx:{mb:1},children:"Category"}),c.categories.map(s=>e.jsx(B,{control:e.jsx(Te,{checked:s===r.state.category,onClick:()=>o(s)}),label:s,sx:{...s==="all"&&{textTransform:"capitalize"}}},s))]}),k=e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsx(f,{variant:"subtitle2",sx:{mb:1},children:"Color"}),e.jsx(ue,{selected:r.state.colors,onSelectColor:s=>l(s),colors:c.colors,limit:6})]}),P=e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsx(f,{variant:"subtitle2",children:"Price"}),e.jsxs(u,{gap:5,display:"flex",sx:{my:2},children:[e.jsx(N,{type:"min",value:r.state.priceRange,onFilters:r.setState}),e.jsx(N,{type:"max",value:r.state.priceRange,onFilters:r.setState})]}),e.jsx(Le,{value:r.state.priceRange,onChange:p,step:10,min:0,max:200,marks:d,getAriaValueText:s=>`$${s}`,valueLabelFormat:s=>`$${s}`,sx:{alignSelf:"center",width:"calc(100% - 24px)"}})]}),y=e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsx(f,{variant:"subtitle2",sx:{mb:2},children:"Rating"}),c.ratings.map((s,j)=>e.jsxs(u,{onClick:()=>h(s),sx:{mb:1,gap:1,ml:-1,p:.5,display:"flex",borderRadius:1,cursor:"pointer",typography:"body2",alignItems:"center","&:hover":{opacity:.48},...r.state.rating===s&&{bgcolor:"action.selected"}},children:[e.jsx(Ee,{readOnly:!0,value:4-j})," & Up"]},s))]});return e.jsxs(e.Fragment,{children:[e.jsx(_,{disableRipple:!0,color:"inherit",endIcon:e.jsx(A,{color:"error",variant:"dot",invisible:!n,children:e.jsx(S,{icon:"ic:round-filter-list"})}),onClick:x,children:"Filters"}),e.jsxs(K,{anchor:"right",open:t,onClose:a,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},children:[m,e.jsx(Y,{sx:{px:2.5,py:3},children:e.jsxs(C,{spacing:3,children:[b,v,k,P,y]})})]})]})}function N({type:t,value:x,onFilters:a}){const n=x[0],r=x[1],c=g.useCallback(()=>{n<0&&a({priceRange:[0,r]}),n>200&&a({priceRange:[200,r]}),r<0&&a({priceRange:[n,0]}),r>200&&a({priceRange:[n,200]})},[r,n,a]);return e.jsxs(C,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:1},children:[e.jsx(f,{variant:"caption",sx:{flexShrink:0,color:"text.disabled",textTransform:"capitalize",fontWeight:"fontWeightSemiBold"},children:`${t} ($)`}),e.jsx(Ie,{fullWidth:!0,value:t==="min"?n:r,onChange:d=>a(t==="min"?{priceRange:[Number(d.target.value),r]}:{priceRange:[n,Number(d.target.value)]}),onBlur:c,inputProps:{step:10,min:0,max:200,type:"number","aria-labelledby":"input-slider"},sx:{maxWidth:48,borderRadius:.75,bgcolor:d=>U(d.vars.palette.grey["500Channel"],.08),[`& .${q.input}`]:{pr:1,py:.75,textAlign:"right",typography:"body2"}}})]})}function ze({filters:t,totalResults:x,sx:a}){const n=o=>{const l=t.state.gender.filter(p=>p!==o);t.setState({gender:l})},r=()=>{t.setState({category:"all"})},c=o=>{const l=t.state.colors.filter(p=>p!==o);t.setState({colors:l})},d=()=>{t.setState({priceRange:[0,200]})},i=()=>{t.setState({rating:""})};return e.jsxs(Be,{totalResults:x,onReset:t.onResetState,sx:a,children:[e.jsx(F,{label:"Gender:",isShow:!!t.state.gender.length,children:t.state.gender.map(o=>g.createElement(w,{...O,key:o,label:o,onDelete:()=>n(o)}))}),e.jsx(F,{label:"Category:",isShow:t.state.category!=="all",children:e.jsx(w,{...O,label:t.state.category,onDelete:r})}),e.jsx(F,{label:"Colors:",isShow:!!t.state.colors.length,children:t.state.colors.map(o=>g.createElement(w,{...O,key:o,label:e.jsx(u,{sx:{ml:-.5,width:18,height:18,bgcolor:o,borderRadius:"50%",border:l=>`solid 1px ${U(l.vars.palette.common.whiteChannel,.24)}`}}),onDelete:()=>c(o)}))}),e.jsx(F,{label:"Price:",isShow:t.state.priceRange[0]!==0||t.state.priceRange[1]!==200,children:e.jsx(w,{...O,label:`$${t.state.priceRange[0]} - ${t.state.priceRange[1]}`,onDelete:d})}),e.jsx(F,{label:"Rating:",isShow:!!t.state.rating,children:e.jsx(w,{...O,label:t.state.rating,onDelete:i})})]})}function De({products:t,loading:x}){const a=z(),n=X(),[r,c]=g.useState("featured"),[d,i]=g.useState(""),o=pe(d),l=Z({gender:[],colors:[],rating:"",category:"all",priceRange:[0,200]}),{searchResults:p,searchLoading:h}=le(o),m=Me({inputData:t,filters:l.state,sortBy:r}),b=l.state.gender.length>0||l.state.colors.length>0||l.state.rating!==""||l.state.category!=="all"||l.state.priceRange[0]!==0||l.state.priceRange[1]!==200,v=!m.length&&b,k=g.useCallback(I=>{c(I)},[]),P=g.useCallback(I=>{i(I)},[]),y=!x&&!t.length,s=e.jsxs(C,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},children:[e.jsx(_e,{query:o,results:p,onSearch:P,loading:h}),e.jsxs(C,{direction:"row",spacing:1,flexShrink:0,children:[e.jsx(Ue,{filters:l,canReset:b,open:n.value,onOpen:n.onTrue,onClose:n.onFalse,options:{colors:J,ratings:ee,genders:te,categories:["all",...re]}}),e.jsx(Ge,{sort:r,onSort:k,sortOptions:se})]})]}),j=e.jsx(ze,{filters:l,totalResults:m.length}),R=e.jsx(xe,{filled:!0,sx:{py:10}});return e.jsxs(ne,{sx:{mb:15},children:[e.jsx(ce,{totalItems:a.totalItems}),e.jsx(f,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Shop"}),e.jsxs(C,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[s,b&&j]}),(v||y)&&R,e.jsx(We,{products:m,loading:x})]})}function Me({inputData:t,filters:x,sortBy:a}){const{gender:n,category:r,colors:c,priceRange:d,rating:i}=x,o=d[0],l=d[1];return a==="featured"&&(t=T(t,["totalSold"],["desc"])),a==="newest"&&(t=T(t,["createdAt"],["desc"])),a==="priceDesc"&&(t=T(t,["price"],["desc"])),a==="priceAsc"&&(t=T(t,["price"],["asc"])),n.length&&(t=t.filter(p=>p.gender.some(h=>n.includes(h)))),r!=="all"&&(t=t.filter(p=>p.category===r)),c.length&&(t=t.filter(p=>p.colors.some(h=>c.includes(h)))),(o!==0||l!==200)&&(t=t.filter(p=>p.price>=o&&p.price<=l)),i&&(t=t.filter(p=>{const h=m=>m==="up4Star"?4:m==="up3Star"?3:m==="up2Star"?2:1;return p.totalRatings>h(i)})),t}const He={title:`Product shop - ${ae.appName}`};function wt(){const{products:t,productsLoading:x}=de();return e.jsxs(e.Fragment,{children:[e.jsx(oe,{children:e.jsxs("title",{children:[" ",He.title]})}),e.jsx(De,{products:t,loading:x})]})}export{wt as default};
