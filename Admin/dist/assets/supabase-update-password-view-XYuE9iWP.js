import{Y as u,ah as y,ai as U,r as L,aj as q,D as e,F as g,$ as T,X as E,ak as b,Z as f,al as N,aW as A,bc as C}from"./index-DJm73Gd8.js";import{z as i}from"./index-DXqQCM1T.js";import{u as P,F as m}from"./fields-DRFNYTBH.js";import{F as S,t as v}from"./form-provider-Bv2QLm_X.js";import"./ko-DBbRYMOz.js";import"./image-DPed605N.js";import{F as I,S as D}from"./sign-up-terms-DbnMw_Ti.js";import{I as j}from"./InputAdornment-B7kdQGsa.js";import{L as F}from"./LoadingButton-8OnUjDzw.js";import{F as V}from"./form-return-link-BtxFyLWB.js";const k={},R=async({email:a,password:t})=>{const{data:s,error:r}=await k.auth.signInWithPassword({email:a,password:t});if(r)throw console.error(r),r;return{data:s,error:r}},W=async({email:a,password:t,firstName:s,lastName:r})=>{var d,c;const{data:o,error:n}=await k.auth.signUp({email:a,password:t,options:{emailRedirectTo:`${window.location.origin}${u.dashboard.root}`,data:{display_name:`${s} ${r}`}}});if(n)throw console.error(n),n;if(!((c=(d=o==null?void 0:o.user)==null?void 0:d.identities)!=null&&c.length))throw new Error("This user already exists");return{data:o,error:n}},$=async({email:a})=>{const{data:t,error:s}=await k.auth.resetPasswordForEmail(a,{redirectTo:`${window.location.origin}${u.auth.supabase.updatePassword}`});if(s)throw console.error(s),s;return{data:t,error:s}},M=async({password:a})=>{const{data:t,error:s}=await k.auth.updateUser({password:a});if(s)throw console.error(s),s;return{data:t,error:s}},z=i.object({email:i.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:i.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function re(){const a=y(),{checkUserSession:t}=U(),[s,r]=L.useState(""),o=q(),n={email:"",password:""},d=P({resolver:v(z),defaultValues:n}),{handleSubmit:c,formState:{isSubmitting:h}}=d,x=c(async l=>{try{await R({email:l.email,password:l.password}),await(t==null?void 0:t()),a.refresh()}catch(w){console.error(w),r(typeof w=="string"?w:w.message)}}),p=e.jsxs(g,{gap:3,display:"flex",flexDirection:"column",children:[e.jsx(m.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),e.jsxs(g,{gap:1.5,display:"flex",flexDirection:"column",children:[e.jsx(T,{component:E,href:u.auth.supabase.resetPassword,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),e.jsx(m.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(j,{position:"end",children:e.jsx(b,{onClick:o.onToggle,edge:"end",children:e.jsx(f,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),e.jsx(F,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:h,loadingIndicator:"Sign in...",children:"Sign in"})]});return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Sign in to your account",description:e.jsxs(e.Fragment,{children:["Donâ€™t have an account? ",e.jsx(T,{component:E,href:u.auth.supabase.signUp,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),!!s&&e.jsx(N,{severity:"error",sx:{mb:3},children:s}),e.jsx(S,{methods:d,onSubmit:x,children:p})]})}const B=i.object({firstName:i.string().min(1,{message:"First name is required!"}),lastName:i.string().min(1,{message:"Last name is required!"}),email:i.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:i.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function ae(){const[a,t]=L.useState(""),s=y(),r=q(),o={firstName:"",lastName:"",email:"",password:""},n=P({resolver:v(B),defaultValues:o}),{handleSubmit:d,formState:{isSubmitting:c}}=n,h=d(async p=>{try{await W({email:p.email,password:p.password,firstName:p.firstName,lastName:p.lastName}),s.push(u.auth.supabase.verify)}catch(l){console.error(l),t(typeof l=="string"?l:l.message)}}),x=e.jsxs(g,{gap:3,display:"flex",flexDirection:"column",children:[e.jsxs(g,{display:"flex",gap:{xs:3,sm:2},flexDirection:{xs:"column",sm:"row"},children:[e.jsx(m.Text,{name:"firstName",label:"First name",InputLabelProps:{shrink:!0}}),e.jsx(m.Text,{name:"lastName",label:"Last name",InputLabelProps:{shrink:!0}})]}),e.jsx(m.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),e.jsx(m.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:r.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(j,{position:"end",children:e.jsx(b,{onClick:r.onToggle,edge:"end",children:e.jsx(f,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(F,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:c,loadingIndicator:"Create account...",children:"Create account"})]});return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Get started absolutely free",description:e.jsxs(e.Fragment,{children:["Already have an account? ",e.jsx(T,{component:E,href:u.auth.supabase.signIn,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),!!a&&e.jsx(N,{severity:"error",sx:{mb:3},children:a}),e.jsx(S,{methods:n,onSubmit:h,children:x}),e.jsx(D,{})]})}const G=i.object({email:i.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function te(){const a=y(),t={email:""},s=P({resolver:v(G),defaultValues:t}),{handleSubmit:r,formState:{isSubmitting:o}}=s,n=r(async c=>{try{await $({email:c.email}),a.push(u.auth.supabase.verify)}catch(h){console.error(h)}}),d=e.jsxs(g,{gap:3,display:"flex",flexDirection:"column",children:[e.jsx(m.Text,{autoFocus:!0,name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0}}),e.jsx(F,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:o,loadingIndicator:"Send request...",children:"Send request"})]});return e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:e.jsx(A,{}),title:"Forgot your password?",description:"Please enter the email address associated with your account and we'll email you a link to reset your password."}),e.jsx(S,{methods:s,onSubmit:n,children:d}),e.jsx(V,{href:u.auth.supabase.signIn})]})}const H=i.object({password:i.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"}),confirmPassword:i.string().min(1,{message:"Confirm password is required!"})}).refine(a=>a.password===a.confirmPassword,{message:"Passwords do not match!",path:["confirmPassword"]});function oe(){const a=y(),[t,s]=L.useState(""),r=q(),o={password:"",confirmPassword:""},n=P({resolver:v(H),defaultValues:o}),{handleSubmit:d,formState:{isSubmitting:c}}=n,h=d(async p=>{try{await M({password:p.password}),a.push(u.dashboard.root)}catch(l){console.error(l),s(typeof l=="string"?l:l.message)}}),x=e.jsxs(g,{gap:3,display:"flex",flexDirection:"column",children:[e.jsx(m.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:r.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(j,{position:"end",children:e.jsx(b,{onClick:r.onToggle,edge:"end",children:e.jsx(f,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(m.Text,{name:"confirmPassword",label:"Confirm password",type:r.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(j,{position:"end",children:e.jsx(b,{onClick:r.onToggle,edge:"end",children:e.jsx(f,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(F,{fullWidth:!0,type:"submit",size:"large",variant:"contained",loading:c,loadingIndicator:"Update password...",children:"Update password"})]});return e.jsxs(e.Fragment,{children:[e.jsx(I,{icon:e.jsx(C,{}),title:"Update password",description:"Successful updates enable access using the new password."}),!!t&&e.jsx(N,{severity:"error",sx:{mb:3},children:t}),e.jsx(S,{methods:n,onSubmit:h,children:x})]})}export{re as S,ae as a,oe as b,te as c};
