import{u}from"./index-B_i2wJma.js";import{ea as g,r as p,ad as j,D as s,V as l,P as M,ak as b,Z as h,bE as U,bF as T,a9 as D,bw as G,bx as _,bu as v,by as q,bz as B,Y as C,F as x,ej as N,T as P,dF as S,$ as V,X as I,a7 as k,N as W}from"./index-DJm73Gd8.js";import{S as n}from"./html-to-markdown-h9-3Gqz-.js";import{z as d}from"./index-DXqQCM1T.js";import"./ko-DBbRYMOz.js";import{I as L}from"./image-DPed605N.js";import{s as w}from"./schema-helper-B8SOemTF.js";import{u as O,F as $}from"./fields-DRFNYTBH.js";import{t as H,F as K}from"./form-provider-Bv2QLm_X.js";import{L as X}from"./LoadingButton-8OnUjDzw.js";import{d as y}from"./format-number-BdgaU6hH.js";import{C as z}from"./Card-DCic7xzO.js";import{A as R}from"./Avatar-CHZSgeuZ.js";const f={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1};function ps(){const t=j.post.list,{data:o,isLoading:e,error:r,isValidating:i}=u(t,g,f);return p.useMemo(()=>({posts:(o==null?void 0:o.posts)||[],postsLoading:e,postsError:r,postsValidating:i,postsEmpty:!e&&!(o!=null&&o.posts.length)}),[o==null?void 0:o.posts,r,e,i])}function us(t){const o=t?[j.post.details,{params:{title:t}}]:"",{data:e,isLoading:r,error:i,isValidating:a}=u(o,g,f);return p.useMemo(()=>({post:e==null?void 0:e.post,postLoading:r,postError:i,postValidating:a}),[e==null?void 0:e.post,i,r,a])}function gs(t){const o=t?[j.post.latest,{params:{title:t}}]:"",{data:e,isLoading:r,error:i,isValidating:a}=u(o,g,f);return p.useMemo(()=>({latestPosts:(e==null?void 0:e.latestPosts)||[],latestPostsLoading:r,latestPostsError:i,latestPostsValidating:a,latestPostsEmpty:!r&&!(e!=null&&e.latestPosts.length)}),[e==null?void 0:e.latestPosts,i,r,a])}function js(t){const o=t?[j.post.search,{params:{query:t}}]:"",{data:e,isLoading:r,error:i,isValidating:a}=u(o,g,{...f,keepPreviousData:!0});return p.useMemo(()=>({searchResults:(e==null?void 0:e.results)||[],searchLoading:r,searchError:i,searchValidating:a,searchEmpty:!r&&!(e!=null&&e.results.length)}),[e==null?void 0:e.results,i,r,a])}function fs({sx:t,amount:o=16,variant:e="vertical",...r}){const i=M("up","sm");return e==="horizontal"?[...Array(o)].map((a,c)=>s.jsxs(l,{direction:"row",sx:{borderRadius:2,bgcolor:"background.paper",border:m=>`solid 1px ${m.vars.palette.divider}`,...t},...r,children:[s.jsxs(l,{spacing:2,flexGrow:1,sx:{p:3},children:[s.jsxs(l,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[s.jsx(n,{variant:"circular",sx:{width:40,height:40}}),s.jsx(n,{sx:{width:24,height:12}})]}),s.jsx(n,{sx:{width:1,height:10}}),s.jsx(n,{sx:{width:"calc(100% - 40px)",height:10}}),s.jsx(n,{sx:{width:"calc(100% - 80px)",height:10}})]}),i&&s.jsx(l,{sx:{p:1},children:s.jsx(n,{sx:{width:170,height:240,flexShrink:0}})})]},c)):[...Array(o)].map((a,c)=>s.jsxs(l,{sx:{borderRadius:2,bgcolor:"background.paper",border:m=>`solid 1px ${m.vars.palette.divider}`,...t},...r,children:[s.jsx(l,{sx:{p:1},children:s.jsx(n,{sx:{pt:"100%"}})}),s.jsxs(l,{spacing:2,direction:"row",alignItems:"center",sx:{p:3,pt:2},children:[s.jsx(n,{variant:"circular",sx:{width:40,height:40,flexShrink:0}}),s.jsxs(l,{flexGrow:1,spacing:1,children:[s.jsx(n,{sx:{height:10}}),s.jsx(n,{sx:{width:.5,height:10}})]})]})]},c))}function bs({...t}){return s.jsxs(l,{...t,children:[s.jsx(n,{variant:"rectangular",sx:{height:480}}),s.jsxs(l,{sx:{width:1,maxWidth:720,mx:"auto"},children:[s.jsxs(l,{spacing:1,sx:{my:8},children:[s.jsx(n,{height:10}),s.jsx(n,{height:10,sx:{width:.9}}),s.jsx(n,{height:10,sx:{width:.8}})]}),s.jsx(n,{sx:{height:720,mb:8}})]})]})}d.object({title:d.string().min(1,{message:"Title is required!"}),description:d.string().min(1,{message:"Description is required!"}),content:w.editor().min(100,{message:"Content must be at least 100 characters"}),coverUrl:w.file({message:{required_error:"Cover is required!"}}),tags:d.string().array().min(2,{message:"Must have at least 2 items!"}),metaKeywords:d.string().array().nonempty({message:"Meta keywords is required!"}),metaTitle:d.string(),metaDescription:d.string()});const Y=d.object({comment:d.string().min(1,{message:"Comment is required!"})});function ys(){const t={comment:""},o=O({resolver:H(Y),defaultValues:t}),{reset:e,handleSubmit:r,formState:{isSubmitting:i}}=o,a=r(async c=>{try{await new Promise(m=>setTimeout(m,500)),e(),console.info("DATA",c)}catch(m){console.error(m)}});return s.jsx(K,{methods:o,onSubmit:a,children:s.jsxs(l,{spacing:3,children:[s.jsx($.Text,{name:"comment",placeholder:"Write some of your comments...",multiline:!0,rows:4}),s.jsxs(l,{direction:"row",alignItems:"center",children:[s.jsxs(l,{direction:"row",alignItems:"center",flexGrow:1,children:[s.jsx(b,{children:s.jsx(h,{icon:"solar:gallery-add-bold"})}),s.jsx(b,{children:s.jsx(h,{icon:"eva:attach-2-fill"})}),s.jsx(b,{children:s.jsx(h,{icon:"eva:smiling-face-fill"})})]}),s.jsx(X,{type:"submit",variant:"contained",loading:i,children:"Post comment"})]})]})})}function Z(t){return T("MuiCardContent",t)}U("MuiCardContent",["root"]);const J=["className","component"],Q=t=>{const{classes:o}=t;return B({root:["root"]},Z,o)},ss=D("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,o)=>o.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),A=p.forwardRef(function(o,e){const r=G({props:o,name:"MuiCardContent"}),{className:i,component:a="div"}=r,c=_(r,J),m=v({},r,{component:a}),F=Q(m);return s.jsx(ss,v({as:a,className:q(F.root,i),ownerState:m,ref:e},c))});function vs({post:t,sx:o,...e}){const r=C.post.details(t.title);return s.jsxs(z,{sx:o,...e,children:[s.jsxs(x,{sx:{position:"relative"},children:[s.jsx(N,{sx:{left:0,zIndex:9,width:88,height:36,bottom:-16,position:"absolute"}}),s.jsx(R,{alt:t.author.name,src:t.author.avatarUrl,sx:{left:24,zIndex:9,bottom:-24,position:"absolute"}}),s.jsx(L,{alt:t.title,src:t.coverUrl,ratio:"4/3"})]}),s.jsxs(A,{sx:{pt:6},children:[s.jsx(P,{variant:"caption",component:"div",sx:{mb:1,color:"text.disabled"},children:S(t.createdAt)}),s.jsx(V,{component:I,href:r,color:"inherit",variant:"subtitle2",sx:i=>({...k({line:2,persistent:i.typography.subtitle2})}),children:t.title}),s.jsx(E,{totalViews:t.totalViews,totalShares:t.totalShares,totalComments:t.totalComments})]})]})}function ws({post:t,index:o}){const e=C.post.details(t.title),r=o===1||o===2;return s.jsxs(z,{children:[s.jsx(R,{alt:t.author.name,src:t.author.avatarUrl,sx:{top:24,left:24,zIndex:9,position:"absolute"}}),s.jsx(L,{alt:t.title,src:t.coverUrl,ratio:"4/3",sx:{height:360},slotProps:{overlay:{bgcolor:i=>W(i.vars.palette.grey["900Channel"],.64)}}}),s.jsxs(A,{sx:{width:1,zIndex:9,bottom:0,position:"absolute",color:"common.white"},children:[s.jsx(P,{variant:"caption",component:"div",sx:{mb:1,opacity:.64},children:S(t.createdAt)}),s.jsx(V,{component:I,href:e,color:"inherit",variant:r?"subtitle2":"h5",sx:i=>({...k({line:2,persistent:r?i.typography.subtitle2:i.typography.h5})}),children:t.title}),s.jsx(E,{totalViews:t.totalViews,totalShares:t.totalShares,totalComments:t.totalComments,sx:{opacity:.64,color:"common.white"}})]})]})}function E({sx:t,totalComments:o,totalViews:e,totalShares:r,...i}){return s.jsxs(x,{gap:1.5,display:"flex",justifyContent:"flex-end",sx:{mt:3,typography:"caption",color:"text.disabled",...t},...i,children:[s.jsxs(x,{gap:.5,display:"flex",alignItems:"center",children:[s.jsx(h,{width:16,icon:"eva:message-circle-fill"}),y(o)]}),s.jsxs(x,{gap:.5,display:"flex",alignItems:"center",children:[s.jsx(h,{width:16,icon:"solar:eye-bold"}),y(e)]}),s.jsxs(x,{gap:.5,display:"flex",alignItems:"center",children:[s.jsx(h,{width:16,icon:"solar:share-bold"}),y(r)]})]})}export{ws as P,vs as a,fs as b,ps as c,bs as d,ys as e,us as f,gs as g,js as u};
