import{ah as S,r as s,bi as g,Y as e,D as o,V as h,W as z,a6 as D,F as C}from"./index-DJm73Gd8.js";import{z as i}from"./index-DXqQCM1T.js";import{t as F,F as T}from"./form-provider-Bv2QLm_X.js";import{u as M,F as m}from"./fields-DRFNYTBH.js";import{M as x}from"./ko-DBbRYMOz.js";import"./image-DPed605N.js";import{M as v}from"./MemberService-CCBPPnBE.js";import{C as E}from"./Card-DCic7xzO.js";import{C as L}from"./CardHeader-qrX2o-AK.js";import{L as f}from"./LoadingButton-8OnUjDzw.js";const V=i.object({user_id:i.string().min(3,{message:"아이디를 입력해 주세요"}),password:i.string().min(4,{message:"비밀번호를 입력해 주세요"}),name:i.string().min(2,{message:"이름을 입력해 주세요"}),cellphone:i.string(),nickname:i.string(),type:i.number(),login_type:i.string(),login_ci_data:i.string(),image_file:i.string(),address1:i.string(),address2:i.string(),address3:i.string(),zip:i.string(),foreign_address:i.string(),gender:i.string(),school_name:i.string(),grade:i.string(),memo:i.string(),zoom_link_url:i.string(),voov_link_url:i.string(),voov_link_exposed_members:i.string(),parent_name:i.string(),parent_cellphone:i.string(),status:i.number(),approve_date:i.date(),leave_date:i.date().nullable().optional(),leave_message:i.string(),agree_marketing:i.string(),notification_type:i.string(),registration_source:i.string(),last_login:i.date().nullable().optional(),created_date:i.date()}),N=i.object({user_id:i.string().min(3,{message:"아이디를 입력해 주세요"}),name:i.string().min(2,{message:"이름을 입력해 주세요"}),password:i.string(),cellphone:i.string(),nickname:i.string(),type:i.number(),login_type:i.string(),login_ci_data:i.string(),image_file:i.string(),address1:i.string(),address2:i.string(),address3:i.string(),zip:i.string(),foreign_address:i.string(),gender:i.string(),school_name:i.string(),grade:i.string(),memo:i.string(),zoom_link_url:i.string(),voov_link_url:i.string(),voov_link_exposed_members:i.string(),parent_name:i.string(),parent_cellphone:i.string(),status:i.number(),approve_date:i.date(),leave_date:i.date().nullable().optional(),leave_message:i.string(),agree_marketing:i.string(),notification_type:i.string(),registration_source:i.string(),last_login:i.date().nullable().optional(),created_date:i.date()});function A({currentUser:a}){const t=S(),p=s.useMemo(()=>({id:(a==null?void 0:a.id)||0,type:(a==null?void 0:a.type)||10,user_id:(a==null?void 0:a.user_id)||"",password:"",login_type:(a==null?void 0:a.login_type)||"이메일",login_ci_data:(a==null?void 0:a.login_ci_data)||"",name:(a==null?void 0:a.name)||"",image_file:(a==null?void 0:a.image_file)||"",nickname:(a==null?void 0:a.nickname)||"",cellphone:(a==null?void 0:a.cellphone)||"",address1:(a==null?void 0:a.address1)||"",address2:(a==null?void 0:a.address2)||"",address3:(a==null?void 0:a.address3)||"",zip:(a==null?void 0:a.zip)||"",foreign_address:(a==null?void 0:a.foreign_address)||"",gender:(a==null?void 0:a.gender)||"남자",school_name:(a==null?void 0:a.school_name)||"",grade:(a==null?void 0:a.grade)||"",memo:(a==null?void 0:a.memo)||"",zoom_link_url:(a==null?void 0:a.zoom_link_url)||"",voov_link_url:(a==null?void 0:a.voov_link_url)||"",voov_link_exposed_members:(a==null?void 0:a.voov_link_exposed_members)||"",parent_name:(a==null?void 0:a.parent_name)||"",parent_cellphone:(a==null?void 0:a.parent_cellphone)||"",status:(a==null?void 0:a.status)||20,approve_date:a!=null&&a.approve_date?new Date(a.approve_date):new Date,leave_date:a!=null&&a.leave_date?new Date(a.leave_date):void 0,leave_message:(a==null?void 0:a.leave_message)||"",agree_marketing:(a==null?void 0:a.agree_marketing)||"동의",notification_type:(a==null?void 0:a.notification_type)||"카카오알림톡",registration_source:(a==null?void 0:a.registration_source)||"지인소개",last_login:a!=null&&a.last_login?new Date(a.last_login):void 0,created_date:a!=null&&a.created_date?new Date(a.created_date):new Date}),[a]),b=s.useMemo(()=>a?N:V,[a]),_=M({mode:"onSubmit",resolver:F(b),defaultValues:p}),k="https://tamburinmusic.com",{reset:n,watch:j,control:R,handleSubmit:y,formState:{isSubmitting:B}}=_;s.useEffect(()=>{a&&n(p)},[a,p,n]),j();const w=y(async l=>{try{a?await v.update({...l,id:a.id,leave_date:l.leave_date||void 0,last_login:l.last_login||void 0})==="success"?(g.success("강사 정보가 수정되었습니다."),t.push(e.teacher.list)):g.error("강사 수정에 실패했습니다."):await v.create({..._.getValues(),type:20,leave_date:void 0,last_login:void 0})?(g.success("강사 정보가 등록되었습니다."),t.push(e.teacher.list)):g.error("강사 등록에 실패했습니다."),n()}catch(d){console.error(d),g.error("오류가 발생했습니다. 다시 시도해주세요.")}});return s.useCallback(async l=>{l&&v.delete(l).then(d=>{g.success("해당 유저 정보를 삭제하였습니다."),t.push(e.teacher.list)})},[t]),o.jsx(T,{methods:_,onSubmit:w,children:o.jsxs(h,{spacing:{xs:3,md:5},sx:{mt:3,mx:"auto",maxWidth:{xs:720,xl:1200}},children:[o.jsxs(E,{children:[o.jsx(L,{title:"기본 정보",subheader:"",sx:{mb:1},action:o.jsx("a",{href:`${k}/auth/admin/${a==null?void 0:a.user_id}`,target:"_blank",rel:"noreferrer",children:o.jsx(z,{variant:"soft",color:"info",sx:{fontSize:"13px",fontWeight:900},children:"강사로 로그인"})})}),o.jsx(D,{}),o.jsx(h,{spacing:3,sx:{p:3},children:o.jsxs(C,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[o.jsx(m.Text,{name:"user_id",label:"아이디",disabled:!!a}),o.jsx(m.Text,{name:"password",label:a?"비밀번호 변경":"비밀번호",type:"password"}),o.jsx(m.Text,{name:"name",label:"이름"}),o.jsx(m.Text,{name:"cellphone",label:"연락처"}),o.jsxs(m.Select,{name:"status",size:"medium",label:"강사 상태",InputLabelProps:{shrink:!0},onChange:l=>{const d=Number(l.target.value);_.setValue("status",d),d===20&&_.setValue("approve_date",new Date)},children:[o.jsx(x,{value:20,children:"활동"}),o.jsx(x,{value:40,children:"탈퇴"})]}),o.jsx("br",{}),o.jsx(m.Text,{name:"last_login",label:"최근 접속일",value:a!=null&&a.last_login?new Date(a.last_login).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",disabled:!0}),o.jsx(m.Text,{name:"created_date",label:"생성일",value:a!=null&&a.created_date?new Date(a.created_date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",disabled:!0})]})})]}),o.jsxs(h,{direction:"row",alignItems:"flex-end",justifyContent:"flex-end",sx:{mt:3,gap:"10px"},children:[o.jsx(f,{color:"inherit",size:"large",variant:"outlined",onClick:()=>t.back(),children:"목록으로"}),o.jsx(f,{type:"submit",variant:"contained",size:"large",children:a?"수정 완료":"등록 완료"})]})]})})}export{A as N};
