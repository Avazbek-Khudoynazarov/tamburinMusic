import{D as e,W as P,Z as x,F as S,ah as C,c3 as k,r as m,$ as w,T as b,a5 as h,V as v,a0 as L,Y as O,dE as f,ab as T,R as A}from"./index-DJm73Gd8.js";import{P as F,a as y,b as W,u as B,c as E}from"./post-item-C4bBoZzM.js";import"./label-Devs2yXx.js";import{u as R,M,i as N}from"./ko-DBbRYMOz.js";import{m as G,p as H}from"./html-to-markdown-h9-3Gqz-.js";import"./image-DPed605N.js";import{u as Q}from"./use-debounce-B63VF-1e.js";import{C as U}from"./custom-popover-Dq5TA9U0.js";import{M as V,T as $}from"./TextField-B_joUv90.js";import{A as z}from"./fields-DRFNYTBH.js";import{I as K}from"./InputAdornment-B7kdQGsa.js";import{A as _}from"./Avatar-CHZSgeuZ.js";import"./index-B_i2wJma.js";import"./index-DXqQCM1T.js";import"./schema-helper-B8SOemTF.js";import"./form-provider-Bv2QLm_X.js";import"./LoadingButton-8OnUjDzw.js";import"./format-number-BdgaU6hH.js";import"./Card-DCic7xzO.js";import"./AuthService-foVeZrRB.js";import"./ListContext-CDIiNrC7.js";import"./Rating-CEq9eddU.js";import"./visuallyHidden-Dan1xhjv.js";import"./DatePicker-CkfG7Gz3.js";import"./listItemButtonClasses-QLc47q-U.js";import"./Tabs-BcQ-S5hI.js";import"./KeyboardArrowRight-S08dGk5c.js";const Y=[{value:"latest",label:"Latest"},{value:"popular",label:"Popular"},{value:"oldest",label:"Oldest"}];function Z({sort:t,sortOptions:o,onSort:a}){const i=R();return e.jsxs(e.Fragment,{children:[e.jsxs(P,{disableRipple:!0,color:"inherit",onClick:i.onOpen,endIcon:e.jsx(x,{icon:i.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort by:",e.jsx(S,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:t})]}),e.jsx(U,{open:i.open,anchorEl:i.anchorEl,onClose:i.onClose,children:e.jsx(V,{children:o.map(s=>e.jsx(M,{selected:t===s.value,onClick:()=>{i.onClose(),a(s.value)},children:s.label},s.value))})})]})}function q({query:t,results:o,onSearch:a,hrefItem:i,loading:s}){const c=C(),d=r=>{c.push(i(r))},u=r=>{t&&r.key==="Enter"&&d(t)};return e.jsx(z,{sx:{width:{xs:1,sm:260}},loading:s,autoHighlight:!0,popupIcon:null,options:o,onInputChange:(r,n)=>a(n),getOptionLabel:r=>r.title,noOptionsText:e.jsx(N,{query:t}),isOptionEqualToValue:(r,n)=>r.id===n.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${k.option}`]:{pl:.75}}}},renderInput:r=>e.jsx($,{...r,placeholder:"Search...",onKeyUp:u,InputProps:{...r.InputProps,startAdornment:e.jsx(K,{position:"start",children:e.jsx(x,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[s?e.jsx(x,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,r.InputProps.endAdornment]})}}),renderOption:(r,n,{inputValue:p})=>{const g=G(n.title,p),l=H(n.title,g);return m.createElement("li",{...r,key:n.id},e.jsx(_,{alt:n.title,src:n.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},n.id),e.jsx(w,{underline:"none",onClick:()=>d(n.title),children:l.map((j,I)=>e.jsx(b,{component:"span",color:j.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:j.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:j.text},I))},p))}})}function D({posts:t,loading:o}){const a=e.jsx(S,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},children:e.jsx(W,{})}),i=e.jsxs(h,{container:!0,spacing:3,children:[t.slice(0,3).map((s,c)=>e.jsx(h,{xs:12,sm:6,md:4,lg:c===0?6:3,sx:{display:{xs:"none",lg:"block"}},children:e.jsx(F,{post:s,index:c})},s.id)),t.slice(0,3).map(s=>e.jsx(h,{xs:12,sm:6,md:4,lg:3,sx:{display:{lg:"none"}},children:e.jsx(y,{post:s})},s.id)),t.slice(3,t.length).map(s=>e.jsx(h,{xs:12,sm:6,md:4,lg:3,children:e.jsx(y,{post:s})},s.id))]});return e.jsxs(e.Fragment,{children:[o?a:i,t.length>8&&e.jsx(v,{alignItems:"center",sx:{mt:8,mb:{xs:10,md:15}},children:e.jsx(P,{size:"large",variant:"outlined",startIcon:e.jsx(x,{icon:"svg-spinners:12-dots-scale-rotate",width:24}),children:"Load More"})})]})}function J({posts:t,loading:o}){const[a,i]=m.useState("latest"),[s,c]=m.useState(""),d=Q(s),{searchResults:u,searchLoading:r}=B(d),n=X({inputData:t,sortBy:a}),p=m.useCallback(l=>{i(l)},[]),g=m.useCallback(l=>{c(l)},[]);return e.jsxs(L,{children:[e.jsx(b,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Blog"}),e.jsxs(v,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsx(q,{query:d,results:u,onSearch:g,loading:r,hrefItem:l=>O.post.details(l)}),e.jsx(Z,{sort:a,onSort:p,sortOptions:Y})]}),e.jsx(D,{posts:n,loading:o})]})}const X=({inputData:t,sortBy:o})=>o==="latest"?f(t,["createdAt"],["desc"]):o==="oldest"?f(t,["createdAt"],["asc"]):o==="popular"?f(t,["totalViews"],["desc"]):t,ee={title:`Post list - ${A.appName}`};function Le(){const{posts:t,postsLoading:o}=E();return e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsxs("title",{children:[" ",ee.title]})}),e.jsx(J,{posts:t,loading:o})]})}export{Le as default};
