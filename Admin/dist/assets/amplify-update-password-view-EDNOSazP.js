import{am as Mt,an as _t,ao as A,ap as P,aq as Dt,ar as v,as as Lt,at as qt,au as ee,av as Bt,aw as Ot,ax as F,ay as de,az as N,aA as M,aB as gt,aC as Ae,aD as jt,aE as Ht,aF as zt,aG as He,aH as B,aI as Wt,aJ as kt,aK as Vt,aL as $t,aM as Kt,aN as le,aO as te,aP as Yt,aQ as Zt,aR as Xt,aS as Jt,aT as Qt,D as p,F as L,$ as ne,ah as V,aU as It,Y as b,r as ue,aV as Gt,aj as be,ai as en,X as Ce,ak as oe,Z as se,al as St,aW as tn,aX as nn}from"./index-DJm73Gd8.js";import{z as I}from"./index-DXqQCM1T.js";import{u as $,F as C}from"./fields-DRFNYTBH.js";import{F as K,t as Y}from"./form-provider-Bv2QLm_X.js";import{u as yt}from"./use-countdown-tc8aHZUa.js";import"./ko-DBbRYMOz.js";import"./image-DPed605N.js";import{F as Z,S as on}from"./sign-up-terms-DbnMw_Ti.js";import{F as Ue}from"./form-return-link-BtxFyLWB.js";import{L as X}from"./LoadingButton-8OnUjDzw.js";import{I as ie}from"./InputAdornment-B7kdQGsa.js";const sn=async()=>{const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:n="",model:o="",architecture:s="",fullVersionList:i=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),r=i.map(a=>`${a.brand}/${a.version}`).join(";");return[t,n,s,o,t,r].filter(a=>a).join(" ")};function an(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}const ae={convert(e,{urlSafe:t}={urlSafe:!1}){const n=typeof e=="string"?e:an(e),o=Mt()(n);return t?o.replace(/\+/g,"-").replace(/\//g,"_"):o}};function rn(){return _t().getRandomValues(new Uint32Array(1))[0]}function cn(e){const{words:t}=e,{sigBytes:n}=e,o=[];for(let s=0;s<n;s++){const i=t[s>>>2]>>>24-s%4*8&255;o.push((i>>>4).toString(16)),o.push((i&15).toString(16))}return o.join("")}class Me{constructor(t,n){this.words=[];let o=t;o=this.words=o||[],n!==void 0?this.sigBytes=n:this.sigBytes=o.length*4}random(t){const n=[];for(let o=0;o<t;o+=4)n.push(rn());return new Me(n,t)}toString(){return cn(this)}}var f;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"})(f||(f={}));const dn={[f.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[f.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[f.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[f.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[f.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[f.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[f.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[f.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[f.EmptySignInPassword]:{message:"password is required to signIn"},[f.EmptySignInUsername]:{message:"username is required to signIn"},[f.EmptySignUpPassword]:{message:"password is required to signUp"},[f.EmptySignUpUsername]:{message:"username is required to signUp"},[f.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[f.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[f.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[f.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[f.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var ze;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(ze||(ze={}));var re;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(re||(re={}));function S(e,t){const{message:n,recoverySuggestion:o}=dn[t];if(!e)throw new A({name:t,message:n,recoverySuggestion:o})}function We(e){return Object.entries(e).map(([t,n])=>({Name:t,Value:n}))}var ke;(function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(ke||(ke={}));var Ve;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ve||(Ve={}));var $e;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})($e||($e={}));var Ke;(function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ke||(Ke={}));var Ye;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Ye||(Ye={}));var Ze;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ze||(Ze={}));var Xe;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Xe||(Xe={}));var Je;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Je||(Je={}));var Qe;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Qe||(Qe={}));var Ge;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ge||(Ge={}));var et;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(et||(et={}));var tt;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(tt||(tt={}));var nt;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(nt||(nt={}));var ot;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"})(ot||(ot={}));var ce;(function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ce||(ce={}));var st;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(st||(st={}));var it;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(it||(it={}));var at;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(at||(at={}));var rt;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"})(rt||(rt={}));var ct;(function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ct||(ct={}));var dt;(function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(dt||(dt={}));var lt;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(lt||(lt={}));var ut;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ut||(ut={}));var pt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(pt||(pt={}));const ln=async e=>{var c,a;const t=(c=e.getConfig().Auth)==null?void 0:c.Cognito;P(t);const n=await e.Auth.getTokens({forceRefresh:!1});Dt(n);const{"cognito:username":o,sub:s}=((a=n.idToken)==null?void 0:a.payload)??{},i={username:o,userId:s},r=un(n);return r&&(i.signInDetails=r),i};function un(e){return e==null?void 0:e.signInDetails}const Rt=async()=>ln(v),_=(e,t)=>Lt({category:qt.Auth,action:e,...t}),pn=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return Nt();default:return e}};function Nt(){return{username:void 0,challengeName:void 0,signInSession:void 0}}const mn=e=>{let t=e(Nt(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},O=mn(pn);function pe(e){O.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function q(){O.dispatch({type:"SET_INITIAL_STATE"})}const Q={convert(e){return new TextEncoder().encode(e)}};function E(e,t){e!=null&&this.fromString(e,t)}function R(){return new E(null,null)}let D;const En=0xdeadbeefcafe,mt=(En&16777215)===15715070;function hn(e,t,n,o,s,i){for(;--i>=0;){const r=t*this[e++]+n[o]+s;s=Math.floor(r/67108864),n[o++]=r&67108863}return s}function fn(e,t,n,o,s,i){const r=t&32767,c=t>>15;for(;--i>=0;){let a=this[e]&32767;const d=this[e++]>>15,l=c*a+d*r;a=r*a+((l&32767)<<15)+n[o]+(s&1073741823),s=(a>>>30)+(l>>>15)+c*d+(s>>>30),n[o++]=a&1073741823}return s}function xn(e,t,n,o,s,i){const r=t&16383,c=t>>14;for(;--i>=0;){let a=this[e]&16383;const d=this[e++]>>14,l=c*a+d*r;a=r*a+((l&16383)<<14)+n[o]+s,s=(a>>28)+(l>>14)+c*d,n[o++]=a&268435455}return s}const Et=typeof navigator<"u";Et&&mt&&navigator.appName==="Microsoft Internet Explorer"?(E.prototype.am=fn,D=30):Et&&mt&&navigator.appName!=="Netscape"?(E.prototype.am=hn,D=26):(E.prototype.am=xn,D=28);E.prototype.DB=D;E.prototype.DM=(1<<D)-1;E.prototype.DV=1<<D;const _e=52;E.prototype.FV=Math.pow(2,_e);E.prototype.F1=_e-D;E.prototype.F2=2*D-_e;const gn="0123456789abcdefghijklmnopqrstuvwxyz",me=[];let H,T;H=48;for(T=0;T<=9;++T)me[H++]=T;H=97;for(T=10;T<36;++T)me[H++]=T;H=65;for(T=10;T<36;++T)me[H++]=T;function ht(e){return gn.charAt(e)}function In(e,t){const n=me[e.charCodeAt(t)];return n??-1}function Sn(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function yn(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function De(e){const t=R();return t.fromInt(e),t}function Rn(e,t){let n;if(t===16)n=4;else if(t===8)n=3;else if(t===2)n=1;else if(t===32)n=5;else if(t===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let o=e.length,s=!1,i=0;for(;--o>=0;){const r=In(e,o);if(r<0){e.charAt(o)==="-"&&(s=!0);continue}s=!1,i===0?this[this.t++]=r:i+n>this.DB?(this[this.t-1]|=(r&(1<<this.DB-i)-1)<<i,this[this.t++]=r>>this.DB-i):this[this.t-1]|=r<<i,i+=n,i>=this.DB&&(i-=this.DB)}this.clamp(),s&&E.ZERO.subTo(this,this)}function Nn(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function wn(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const n=(1<<t)-1;let o,s=!1,i="",r=this.t,c=this.DB-r*this.DB%t;if(r-- >0)for(c<this.DB&&(o=this[r]>>c)>0&&(s=!0,i=ht(o));r>=0;)c<t?(o=(this[r]&(1<<c)-1)<<t-c,o|=this[--r]>>(c+=this.DB-t)):(o=this[r]>>(c-=t)&n,c<=0&&(c+=this.DB,--r)),o>0&&(s=!0),s&&(i+=ht(o));return s?i:"0"}function Cn(){const e=R();return E.ZERO.subTo(this,e),e}function Tn(){return this.s<0?this.negate():this}function Pn(e){let t=this.s-e.s;if(t!=0)return t;let n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function Le(e){let t=1,n;return(n=e>>>16)!==0&&(e=n,t+=16),(n=e>>8)!==0&&(e=n,t+=8),(n=e>>4)!==0&&(e=n,t+=4),(n=e>>2)!==0&&(e=n,t+=2),(n=e>>1)!==0&&(e=n,t+=1),t}function vn(){return this.t<=0?0:this.DB*(this.t-1)+Le(this[this.t-1]^this.s&this.DM)}function Fn(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function An(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function bn(e,t){const n=e%this.DB,o=this.DB-n,s=(1<<o)-1,i=Math.floor(e/this.DB);let r=this.s<<n&this.DM,c;for(c=this.t-1;c>=0;--c)t[c+i+1]=this[c]>>o|r,r=(this[c]&s)<<n;for(c=i-1;c>=0;--c)t[c]=0;t[i]=r,t.t=this.t+i+1,t.s=this.s,t.clamp()}function Un(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}const o=e%this.DB,s=this.DB-o,i=(1<<o)-1;t[0]=this[n]>>o;for(let r=n+1;r<this.t;++r)t[r-n-1]|=(this[r]&i)<<s,t[r-n]=this[r]>>o;o>0&&(t[this.t-n-1]|=(this.s&i)<<s),t.t=this.t-n,t.clamp()}function Mn(e,t){let n=0,o=0;const s=Math.min(e.t,this.t);for(;n<s;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()}function _n(e,t){const n=this.abs(),o=e.abs();let s=n.t;for(t.t=s+o.t;--s>=0;)t[s]=0;for(s=0;s<o.t;++s)t[s+n.t]=n.am(0,o[s],t,s,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&E.ZERO.subTo(t,t)}function Dn(e){const t=this.abs();let n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){const o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function Ln(e,t,n){const o=e.abs();if(o.t<=0)return;const s=this.abs();if(s.t<o.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n===null&&(n=R());const i=R(),r=this.s,c=e.s,a=this.DB-Le(o[o.t-1]);a>0?(o.lShiftTo(a,i),s.lShiftTo(a,n)):(o.copyTo(i),s.copyTo(n));const d=i.t,l=i[d-1];if(l===0)return;const m=l*(1<<this.F1)+(d>1?i[d-2]>>this.F2:0),u=this.FV/m,x=(1<<this.F1)/m,h=1<<this.F2;let g=n.t,w=g-d;const y=t===null?R():t;for(i.dlShiftTo(w,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),E.ONE.dlShiftTo(d,y),y.subTo(i,i);i.t<d;)i[i.t++]=0;for(;--w>=0;){let W=n[--g]===l?this.DM:Math.floor(n[g]*u+(n[g-1]+h)*x);if((n[g]+=i.am(0,W,n,w,0,d))<W)for(i.dlShiftTo(w,y),n.subTo(y,n);n[g]<--W;)n.subTo(y,n)}t!==null&&(n.drShiftTo(d,t),r!==c&&E.ZERO.subTo(t,t)),n.t=d,n.clamp(),a>0&&n.rShiftTo(a,n),r<0&&E.ZERO.subTo(n,n)}function qn(e){const t=R();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(E.ZERO)>0&&e.subTo(t,t),t}function Bn(){if(this.t<1)return 0;const e=this[0];if(!(e&1))return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function On(e){return this.compareTo(e)===0}function jn(e,t){let n=0,o=0;const s=Math.min(e.t,this.t);for(;n<s;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()}function Hn(e){const t=R();return this.addTo(e,t),t}function zn(e){const t=R();return this.subTo(e,t),t}function Wn(e){const t=R();return this.multiplyTo(e,t),t}function kn(e){const t=R();return this.divRemTo(e,t,null),t}function z(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Vn(e){const t=R();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(E.ZERO)>0&&this.m.subTo(t,t),t}function $n(e){const t=R();return e.copyTo(t),this.reduce(t),t}function Kn(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=e[t]&32767;const o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Yn(e,t){e.squareTo(t),this.reduce(t)}function Zn(e,t,n){e.multiplyTo(t,n),this.reduce(n)}z.prototype.convert=Vn;z.prototype.revert=$n;z.prototype.reduce=Kn;z.prototype.mulTo=Zn;z.prototype.sqrTo=Yn;function Xn(e,t,n){let o=e.bitLength(),s,i=De(1);const r=new z(t);if(o<=0)return i;o<18?s=1:o<48?s=3:o<144?s=4:o<768?s=5:s=6;const c=[];let a=3;const d=s-1,l=(1<<s)-1;if(c[1]=r.convert(this),s>1){const y=R();for(r.sqrTo(c[1],y);a<=l;)c[a]=R(),r.mulTo(y,c[a-2],c[a]),a+=2}let m=e.t-1,u,x=!0,h=R(),g;for(o=Le(e[m])-1;m>=0;){for(o>=d?u=e[m]>>o-d&l:(u=(e[m]&(1<<o+1)-1)<<d-o,m>0&&(u|=e[m-1]>>this.DB+o-d)),a=s;!(u&1);)u>>=1,--a;if((o-=a)<0&&(o+=this.DB,--m),x)c[u].copyTo(i),x=!1;else{for(;a>1;)r.sqrTo(i,h),r.sqrTo(h,i),a-=2;a>0?r.sqrTo(i,h):(g=i,i=h,h=g),r.mulTo(h,c[u],i)}for(;m>=0&&!(e[m]&1<<o);)r.sqrTo(i,h),g=i,i=h,h=g,--o<0&&(o=this.DB-1,--m)}const w=r.revert(i);return n(null,w),w}E.prototype.copyTo=Sn;E.prototype.fromInt=yn;E.prototype.fromString=Rn;E.prototype.clamp=Nn;E.prototype.dlShiftTo=Fn;E.prototype.drShiftTo=An;E.prototype.lShiftTo=bn;E.prototype.rShiftTo=Un;E.prototype.subTo=Mn;E.prototype.multiplyTo=_n;E.prototype.squareTo=Dn;E.prototype.divRemTo=Ln;E.prototype.invDigit=Bn;E.prototype.addTo=jn;E.prototype.toString=wn;E.prototype.negate=Cn;E.prototype.abs=Tn;E.prototype.compareTo=Pn;E.prototype.bitLength=vn;E.prototype.mod=qn;E.prototype.equals=On;E.prototype.add=Hn;E.prototype.subtract=zn;E.prototype.multiply=Wn;E.prototype.divide=kn;E.prototype.modPow=Xn;E.ZERO=De(0);E.ONE=De(1);const Jn=async({a:e,g:t,k:n,x:o,B:s,N:i,U:r})=>new Promise((c,a)=>{t.modPow(o,i,(d,l)=>{if(d){a(d);return}s.subtract(n.multiply(l)).modPow(e.add(r.multiply(o)),i,(m,u)=>{if(m){a(m);return}c(u.mod(i))})})}),Qn="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",wt={},Te={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),wt[e]=t,Te[t]=e}const j=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const o=e.slice(n,n+2).toLowerCase();if(o in Te)t[n/2]=Te[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t},qe=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=wt[e[n]];return t},Pe=e=>{const t=new ee;t.update(e);const n=t.digestSync(),o=qe(n);return new Array(64-o.length).join("0")+o},G=e=>Pe(j(e)),Gn=/^[89a-f]/i,U=e=>{if(!(e instanceof E))throw new Error("Not a BigInteger");const t=e.compareTo(E.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!==0?`0${n}`:n,n=Gn.test(n)?`00${n}`:n,t){const o=n.split("").map(i=>{const r=~parseInt(i,16)&15;return"0123456789ABCDEF".charAt(r)}).join("");n=new E(o,16).add(E.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},eo=({A:e,B:t})=>{const n=new E(G(U(e)+U(t)),16);if(n.equals(E.ZERO))throw new Error("U cannot be zero.");return n},to=(e,t,n)=>{const o=new ee(t);o.update(e);const s=o.digestSync(),i=new ee(s);return i.update(n),i.digestSync().slice(0,16)},Be=e=>{const t=new Me().random(e).toString();return j(t)},no=()=>ae.convert(Be(40));class oo{constructor({userPoolName:t,a:n,g:o,A:s,N:i}){this.encoder=Q,this.userPoolName=t,this.a=n,this.g=o,this.A=s,this.N=i,this.k=new E(G(`${U(i)}${U(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new A({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new A({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new A({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(t,n){this.randomPassword=no();const o=`${t}${n}:${this.randomPassword}`,s=Pe(o),i=qe(Be(16));return this.saltToHashDevices=U(new E(i,16)),new Promise((r,c)=>{this.g.modPow(new E(G(this.saltToHashDevices+s),16),this.N,(a,d)=>{if(a){c(a);return}this.verifierDevices=U(d),r()})})}async getPasswordAuthenticationKey({username:t,password:n,serverBValue:o,salt:s}){if(o.mod(this.N).equals(E.ZERO))throw new Error("B cannot be zero.");const i=eo({A:this.A,B:o}),r=`${this.userPoolName}${t}:${n}`,c=Pe(r),a=new E(G(U(s)+c),16),d=await Jn({a:this.a,g:this.g,k:this.k,x:a,B:o,N:this.N,U:i}),l=this.encoder.convert("Caldera Derived Key"),m=this.encoder.convert(""),u=new Uint8Array(l.byteLength+m.byteLength);return u.set(l,0),u.set(m,l.byteLength),to(j(U(d)),j(U(i)),u)}}const so=async({a:e,g:t,N:n})=>new Promise((o,s)=>{t.modPow(e,n,(i,r)=>{if(i){s(i);return}if(r.mod(n).equals(E.ZERO)){s(new Error("Illegal parameter. A mod N cannot be 0."));return}o(r)})}),Ee=async e=>{const t=new E(Qn,16),n=new E("2",16),o=io(),s=await so({a:o,g:n,N:t});return new oo({userPoolName:e,a:o,g:n,A:s,N:t})},io=()=>{const e=qe(Be(128));return new E(e,16)},ao=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ro=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ct=()=>{const e=new Date,t=ro[e.getUTCDay()],n=ao[e.getUTCMonth()],o=e.getUTCDate();let s=e.getUTCHours();s<10&&(s=`0${s}`);let i=e.getUTCMinutes();i<10&&(i=`0${i}`);let r=e.getUTCSeconds();r<10&&(r=`0${r}`);const c=e.getUTCFullYear();return`${t} ${n} ${o} ${s}:${i}:${r} UTC ${c}`},Tt=({userPoolName:e,username:t,challengeParameters:n,dateNow:o,hkdf:s})=>{const i=Q.convert(e),r=Q.convert(t),c=co(n.SECRET_BLOCK),a=Q.convert(o),d=new Uint8Array(i.byteLength+r.byteLength+c.byteLength+a.byteLength);d.set(i,0),d.set(r,i.byteLength),d.set(c,i.byteLength+r.byteLength),d.set(a,i.byteLength+r.byteLength+c.byteLength);const l=new ee(s);l.update(d);const m=l.digestSync();return ae.convert(m)},co=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=Bt.convert(n),s=new Uint8Array(o.length);for(let i=0;i<o.length;++i)s[i]=o.charCodeAt(i);return s},ft="userAttributes.";async function lo(e,t,n,o,s){var x,h;const{userPoolClientId:i,userPoolId:r}=o,c={USERNAME:e,PASSWORD:t},a=await s.getDeviceMetadata(e);a&&a.deviceKey&&(c.DEVICE_KEY=a.deviceKey);const d=F({username:e,userPoolId:r,userPoolClientId:i}),l={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:c,ClientMetadata:n,ClientId:i,UserContextData:d},m=await de({region:N(r),userAgentValue:_(M.SignIn)},l),u=((x=m.ChallengeParameters)==null?void 0:x.USERNAME)??((h=m.ChallengeParameters)==null?void 0:h.USER_ID_FOR_SRP)??e;return Ie(u),m.ChallengeName==="DEVICE_SRP_AUTH"?Oe({username:u,config:o,clientMetadata:n,session:m.Session,tokenOrchestrator:s}):m}async function uo(e,t,n,o,s){const{userPoolId:i,userPoolClientId:r}=o,c=(i==null?void 0:i.split("_")[1])||"",a=await Ee(c),d={USERNAME:e,SRP_A:a.A.toString(16)},l=F({username:e,userPoolId:i,userPoolClientId:r}),m={AuthFlow:"USER_SRP_AUTH",AuthParameters:d,ClientMetadata:n,ClientId:r,UserContextData:l},u=await de({region:N(i),userAgentValue:_(M.SignIn)},m),{ChallengeParameters:x,Session:h}=u,g=(x==null?void 0:x.USERNAME)??e;return Ie(g),ge(Pt,[t,x,n,h,a,o,s],g,s)}async function po(e,t,n,o){var u;const{userPoolClientId:s,userPoolId:i}=n,r={USERNAME:e},c=await o.getDeviceMetadata(e);c&&c.deviceKey&&(r.DEVICE_KEY=c.deviceKey);const a=F({username:e,userPoolId:i,userPoolClientId:s}),d={AuthFlow:"CUSTOM_AUTH",AuthParameters:r,ClientMetadata:t,ClientId:s,UserContextData:a},l=await de({region:N(i),userAgentValue:_(M.SignIn)},d),m=((u=l.ChallengeParameters)==null?void 0:u.USERNAME)??e;return Ie(m),l.ChallengeName==="DEVICE_SRP_AUTH"?Oe({username:m,config:n,clientMetadata:t,session:l.Session,tokenOrchestrator:o}):l}async function mo(e,t,n,o,s){P(o);const{userPoolId:i,userPoolClientId:r}=o,c=(i==null?void 0:i.split("_")[1])||"",a=await Ee(c),d={USERNAME:e,SRP_A:a.A.toString(16),CHALLENGE_NAME:"SRP_A"},l=F({username:e,userPoolId:i,userPoolClientId:r}),m={AuthFlow:"CUSTOM_AUTH",AuthParameters:d,ClientMetadata:n,ClientId:r,UserContextData:l},{ChallengeParameters:u,Session:x}=await de({region:N(i),userAgentValue:_(M.SignIn)},m),h=(u==null?void 0:u.USERNAME)??e;return Ie(h),ge(Pt,[t,u,n,x,a,o,s],h,s)}async function Oe({username:e,config:t,clientMetadata:n,session:o,tokenOrchestrator:s}){const{userPoolId:i}=t,r=t.userPoolClientId,c=await(s==null?void 0:s.getDeviceMetadata(e));gt(c);const a=await Ee(c.deviceGroupKey),d={USERNAME:e,SRP_A:a.A.toString(16),DEVICE_KEY:c.deviceKey},l={ChallengeName:"DEVICE_SRP_AUTH",ClientId:r,ChallengeResponses:d,ClientMetadata:n,Session:o},{ChallengeParameters:m,Session:u}=await Ae({region:N(i)},l);return Eo(e,m,n,u,a,t,s)}async function Eo(e,t,n,o,s,{userPoolId:i,userPoolClientId:r},c){const a=await(c==null?void 0:c.getDeviceMetadata(e));gt(a);const d=new E(t==null?void 0:t.SRP_B,16),l=new E(t==null?void 0:t.SALT,16),{deviceKey:m}=a,{deviceGroupKey:u}=a,x=await s.getPasswordAuthenticationKey({username:a.deviceKey,password:a.randomPassword,serverBValue:d,salt:l}),h=Ct(),g={USERNAME:(t==null?void 0:t.USERNAME)??e,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:h,PASSWORD_CLAIM_SIGNATURE:Tt({username:m,userPoolName:u,challengeParameters:t,dateNow:h,hkdf:x}),DEVICE_KEY:m},w=F({username:e,userPoolId:i,userPoolClientId:r}),y={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:g,Session:o,ClientMetadata:n,UserContextData:w};return Ae({region:N(i)},y)}async function Pt(e,t,n,o,s,i,r){const{userPoolId:c,userPoolClientId:a}=i,d=(c==null?void 0:c.split("_")[1])||"",l=new E(t==null?void 0:t.SRP_B,16),m=new E(t==null?void 0:t.SALT,16),u=t==null?void 0:t.USER_ID_FOR_SRP;if(!u)throw new A({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const x=await s.getPasswordAuthenticationKey({username:u,password:e,serverBValue:l,salt:m}),h=Ct(),g={USERNAME:u,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:h,PASSWORD_CLAIM_SIGNATURE:Tt({username:u,userPoolName:d,challengeParameters:t,dateNow:h,hkdf:x})},w=await r.getDeviceMetadata(u);w&&w.deviceKey&&(g.DEVICE_KEY=w.deviceKey);const y=F({username:u,userPoolId:c,userPoolClientId:a}),W={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:g,ClientMetadata:n,Session:o,ClientId:a,UserContextData:y},Ne=await Ae({region:N(c)},W);return Ne.ChallengeName==="DEVICE_SRP_AUTH"?Oe({username:u,config:i,clientMetadata:n,session:Ne.Session,tokenOrchestrator:r}):Ne}async function he(e){var s;const{challengeName:t,challengeParameters:n}=e,o=(s=v.getConfig().Auth)==null?void 0:s.Cognito;switch(P(o),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":{const{signInSession:i,username:r}=O.getState();if(!go(n,"TOTP"))throw new A({name:re.SignInException,message:`Cannot initiate MFA setup from available types: ${ve(Fe(n.MFAS_CAN_SETUP))}`});const{Session:c,SecretCode:a}=await jt({region:N(o.userPoolId)},{Session:i});return O.dispatch({type:"SET_SIGN_IN_SESSION",value:c}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:ho(a,r)}}}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:fo(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:ve(Fe(n.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new A({name:re.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function ho(e,t){return{sharedSecret:e,getSetupUri:(n,o)=>{const s=`otpauth://totp/${n}:${o??t}?secret=${e}&issuer=${n}`;return new Ht(s)}}}function fe(e){if(e===ce.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===ce.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function fo(e){return e?JSON.parse(e).map(n=>n.includes(ft)?n.replace(ft,""):n):[]}function xo(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP"}function ve(e){if(e)return e.map(xo).filter(Boolean)}function Fe(e){return e?JSON.parse(e):[]}function go(e,t){const{MFAS_CAN_SETUP:n}=e,o=ve(Fe(n));return o?o.includes(t):!1}async function Io(){let e;try{e=await Rt()}catch{}if(e&&e.userId&&e.username)throw new A({name:Ot,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}async function xe(e,t,n){if(!t)return;const o=e.split("_")[1]||"",s=await Ee(o),i=t==null?void 0:t.DeviceKey,r=t==null?void 0:t.DeviceGroupKey;try{await s.generateHashDevice(r??"",i??"")}catch{return}const c={Salt:ae.convert(j(s.getSaltToHashDevices())),PasswordVerifier:ae.convert(j(s.getVerifierDevices()))},a=s.getRandomPassword();try{return await zt({region:N(e)},{AccessToken:n,DeviceName:await sn(),DeviceKey:t==null?void 0:t.DeviceKey,DeviceSecretVerifierConfig:c}),{deviceKey:i,deviceGroupKey:r,randomPassword:a}}catch{return}}async function ge(e,t,n,o){try{return await e(...t)}catch(s){if(s instanceof A&&s.name==="ResourceNotFoundException"&&s.message.includes("Device does not exist."))return await o.clearDeviceMetadata(n),e(...t);throw s}}function Ie(e){const{dispatch:t}=O;t({type:"SET_USERNAME",value:e})}function Se(e){return O.getState().username??e}async function ye(e){if(e.AccessToken){const t=He(e.AccessToken),n=(t.payload.iat||0)*1e3,o=new Date().getTime(),s=n>0?n-o:0;let i,r,c;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(i=He(e.IdToken)),e!=null&&e.NewDeviceMetadata&&(c=e.NewDeviceMetadata);const a={accessToken:t,idToken:i,refreshToken:r,clockDrift:s,deviceMetadata:c,username:e.username};e!=null&&e.signInDetails&&(a.signInDetails=e.signInDetails),await B.setTokens({tokens:a})}else throw new Wt({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}const So="Unable to get user session following successful sign-in.",Re=async()=>{try{kt.dispatch("auth",{event:"signedIn",data:await Rt()},"Auth",Vt)}catch(e){throw e.name===$t?new A({name:Kt,message:So,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}};async function yo(e){var c;const t=(c=v.getConfig().Auth)==null?void 0:c.Cognito;P(t);const{username:n,password:o,options:s}=e,i={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},r=s==null?void 0:s.clientMetadata;S(!!n,f.EmptySignInUsername),S(!o,f.CustomAuthSignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:l,Session:m}=await ge(po,[n,r,t,B],n,B),u=Se(n);return pe({signInSession:m,username:u,challengeName:a,signInDetails:i}),l?(q(),await ye({username:u,...l,NewDeviceMetadata:await xe(t.userPoolId,l.NewDeviceMetadata,l.AccessToken),signInDetails:i}),await Re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):he({challengeName:a,challengeParameters:d})}catch(a){q(),le(a);const d=fe(a.name);if(d)return d;throw a}}async function Ro(e){var c;const{username:t,password:n,options:o}=e,s={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},i=(c=v.getConfig().Auth)==null?void 0:c.Cognito;P(i);const r=o==null?void 0:o.clientMetadata;S(!!t,f.EmptySignInUsername),S(!!n,f.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:l,Session:m}=await mo(t,n,r,i,B),u=Se(t);return pe({signInSession:m,username:u,challengeName:a,signInDetails:s}),l?(await ye({username:u,...l,NewDeviceMetadata:await xe(i.userPoolId,l.NewDeviceMetadata,l.AccessToken),signInDetails:s}),q(),await Re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):he({challengeName:a,challengeParameters:d})}catch(a){q(),le(a);const d=fe(a.name);if(d)return d;throw a}}async function xt(e){var r,c;const{username:t,password:n}=e,o=(r=v.getConfig().Auth)==null?void 0:r.Cognito,s={loginId:t,authFlowType:"USER_SRP_AUTH"};P(o);const i=(c=e.options)==null?void 0:c.clientMetadata;S(!!t,f.EmptySignInUsername),S(!!n,f.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:l,Session:m}=await uo(t,n,i,o,B),u=Se(t);return pe({signInSession:m,username:u,challengeName:a,signInDetails:s}),l?(q(),await ye({username:u,...l,NewDeviceMetadata:await xe(o.userPoolId,l.NewDeviceMetadata,l.AccessToken),signInDetails:s}),await Re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):he({challengeName:a,challengeParameters:d})}catch(a){q(),le(a);const d=fe(a.name);if(d)return d;throw a}}async function No(e){var c;const{username:t,password:n,options:o}=e,s=(c=v.getConfig().Auth)==null?void 0:c.Cognito,i={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};P(s);const r=o==null?void 0:o.clientMetadata;S(!!t,f.EmptySignInUsername),S(!!n,f.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:l,Session:m}=await ge(lo,[t,n,r,s,B],t,B),u=Se(t);return pe({signInSession:m,username:u,challengeName:a,signInDetails:i}),l?(await ye({...l,username:u,NewDeviceMetadata:await xe(s.userPoolId,l.NewDeviceMetadata,l.AccessToken),signInDetails:i}),q(),await Re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):he({challengeName:a,challengeParameters:d})}catch(a){q(),le(a);const d=fe(a.name);if(d)return d;throw a}}async function wo(e){var n;const t=(n=e.options)==null?void 0:n.authFlowType;switch(await Io(),t){case"USER_SRP_AUTH":return xt(e);case"USER_PASSWORD_AUTH":return No(e);case"CUSTOM_WITHOUT_SRP":return yo(e);case"CUSTOM_WITH_SRP":return Ro(e);default:return xt(e)}}const Co=3*60*1e3;function To(e){const t=te.listen("auth-internal",async({payload:o})=>{switch(o.event){case"confirmSignUp":{const s=o.data;s!=null&&s.isSignUpComplete&&(te.dispatch("auth-internal",{event:"autoSignIn"}),t())}}}),n=setTimeout(()=>{t(),je(!1),clearTimeout(n)},Co)}let vt=!1,Ft;function At(e){Ft=e}function Po(e){return Ft===e}function k(){return vt}function je(e){e===!1&&At(void 0),vt=e}function J(e){return!!e.UserConfirmed}async function vo(e){var g;const{username:t,password:n,options:o}=e,s=(g=v.getConfig().Auth)==null?void 0:g.Cognito,i=(s==null?void 0:s.signUpVerificationMethod)??"code",{clientMetadata:r,validationData:c,autoSignIn:a}=e.options??{};P(s),S(!!t,f.EmptySignUpUsername),S(!!n,f.EmptySignUpPassword);const d=typeof a!="boolean"?a:void 0;d==null||d.authFlowType,(d||a===!0)&&(At(t),je(!0));const{userPoolId:l,userPoolClientId:m}=s,u=await Yt({region:N(l),userAgentValue:_(M.SignUp)},{Username:t,Password:n,UserAttributes:(o==null?void 0:o.userAttributes)&&We(o==null?void 0:o.userAttributes),ClientMetadata:r,ValidationData:c&&We(c),ClientId:m,UserContextData:F({username:t,userPoolId:l,userPoolClientId:m})}),{UserSub:x,CodeDeliveryDetails:h}=u;if(J(u)&&k())return{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:x};if(J(u)&&!k())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:x};if(!J(u)&&k()&&i==="code")To();else if(!J(u)&&k()&&i==="link")return{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:h==null?void 0:h.DeliveryMedium,destination:h==null?void 0:h.Destination,attributeName:h==null?void 0:h.AttributeName}},userId:x};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:h==null?void 0:h.DeliveryMedium,destination:h==null?void 0:h.Destination,attributeName:h==null?void 0:h.AttributeName}},userId:x}}async function Fo(e){var d,l;const{username:t}=e;S(!!t,f.EmptyResetPasswordUsername);const n=(d=v.getConfig().Auth)==null?void 0:d.Cognito;P(n);const{userPoolClientId:o,userPoolId:s}=n,i=(l=e.options)==null?void 0:l.clientMetadata,r=F({username:t,userPoolId:s,userPoolClientId:o}),a=(await Zt({region:N(n.userPoolId),userAgentValue:_(M.ResetPassword)},{Username:t,ClientMetadata:i,ClientId:n.userPoolClientId,UserContextData:r})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:a==null?void 0:a.DeliveryMedium,destination:a==null?void 0:a.Destination,attributeName:a==null?void 0:a.AttributeName}}}}async function Ao(e){var d,l;const t=(d=v.getConfig().Auth)==null?void 0:d.Cognito;P(t);const{userPoolClientId:n,userPoolId:o}=t,{username:s,newPassword:i}=e;S(!!s,f.EmptyConfirmResetPasswordUsername),S(!!i,f.EmptyConfirmResetPasswordNewPassword);const r=e.confirmationCode;S(!!r,f.EmptyConfirmResetPasswordConfirmationCode);const c=(l=e.options)==null?void 0:l.clientMetadata,a=F({username:s,userPoolId:o,userPoolClientId:n});await Xt({region:N(t.userPoolId),userAgentValue:_(M.ConfirmResetPassword)},{Username:s,ConfirmationCode:r,Password:i,ClientMetadata:c,ClientId:t.userPoolClientId,UserContextData:a})}async function bo(e){var m,u;const{username:t}=e;S(!!t,f.EmptySignUpUsername);const n=(m=v.getConfig().Auth)==null?void 0:m.Cognito;P(n);const{userPoolClientId:o,userPoolId:s}=n,i=(u=e.options)==null?void 0:u.clientMetadata,r=F({username:t,userPoolId:s,userPoolClientId:o}),{CodeDeliveryDetails:c}=await Jt({region:N(n.userPoolId),userAgentValue:_(M.ResendSignUpCode)},{Username:t,ClientMetadata:i,ClientId:n.userPoolClientId,UserContextData:r}),{DeliveryMedium:a,AttributeName:d,Destination:l}={...c};return{destination:l,deliveryMedium:a,attributeName:d||void 0}}async function Uo(e){var d;const{username:t,confirmationCode:n,options:o}=e,s=(d=v.getConfig().Auth)==null?void 0:d.Cognito;P(s);const{userPoolId:i,userPoolClientId:r}=s,c=o==null?void 0:o.clientMetadata;S(!!t,f.EmptyConfirmSignUpUsername),S(!!n,f.EmptyConfirmSignUpCode);const a=F({username:t,userPoolId:i,userPoolClientId:r});return await Qt({region:N(s.userPoolId),userAgentValue:_(M.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:c,ForceAliasCreation:o==null?void 0:o.forceAliasCreation,ClientId:s.userPoolClientId,UserContextData:a}),new Promise((l,m)=>{try{const u={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!k()||!Po(t)){l(u);return}const x=te.listen("auth-internal",({payload:h})=>{switch(h.event){case"autoSignIn":l({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),je(!1),x()}});te.dispatch("auth-internal",{event:"confirmSignUp",data:u})}catch(u){m(u)}})}const Mo=async({username:e,password:t})=>{await wo({username:e,password:t})},_o=async({username:e,password:t,firstName:n,lastName:o})=>{await vo({username:e,password:t,options:{userAttributes:{email:e,given_name:n,family_name:o}}})},Do=async({username:e,confirmationCode:t})=>{await Uo({username:e,confirmationCode:t})},we=async({username:e})=>{await bo({username:e})},bt=async({username:e})=>{await Fo({username:e})},Lo=async({username:e,confirmationCode:t,newPassword:n})=>{await Ao({username:e,confirmationCode:t,newPassword:n})};function Ut({value:e,disabled:t,onResendCode:n,sx:o,...s}){return p.jsxs(L,{sx:{mt:3,typography:"body2",alignSelf:"center",...o},...s,children:["Dont have a code? ",p.jsxs(ne,{variant:"subtitle2",onClick:n,sx:{cursor:"pointer",...t&&{color:"text.disabled",pointerEvents:"none"}},children:["Resend ",t&&e&&e>0&&`(${e}s)`]})]})}const qo=I.object({code:I.string().min(1,{message:"Code is required!"}).min(6,{message:"Code must be at least 6 characters!"}),email:I.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function Go(){const e=V(),n=It().get("email"),o=yt(5),s={code:"",email:n||""},i=$({resolver:Y(qo),defaultValues:s}),{watch:r,handleSubmit:c,formState:{isSubmitting:a}}=i,d=r(),l=c(async x=>{try{await Do({username:x.email,confirmationCode:x.code}),e.push(b.auth.amplify.signIn)}catch(h){console.error(h)}}),m=ue.useCallback(async()=>{if(!o.isCounting)try{o.reset(),o.start(),await(we==null?void 0:we({username:d.email}))}catch(x){console.error(x)}},[o,d.email]),u=p.jsxs(L,{gap:3,display:"flex",flexDirection:"column",children:[p.jsx(C.Text,{name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0},disabled:!0}),p.jsx(C.Code,{name:"code"}),p.jsx(X,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:a,loadingIndicator:"Verify...",children:"Verify"})]});return p.jsxs(p.Fragment,{children:[p.jsx(Z,{icon:p.jsx(Gt,{}),title:"Please check your email!",description:`We've emailed a 6-digit confirmation code. 
Please enter the code in the box below to verify your email.`}),p.jsx(K,{methods:i,onSubmit:l,children:u}),p.jsx(Ut,{onResendCode:m,value:o.value,disabled:o.isCounting}),p.jsx(Ue,{href:b.auth.amplify.signIn})]})}const Bo=I.object({email:I.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:I.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function es(){const e=V(),t=be(),[n,o]=ue.useState(""),{checkUserSession:s}=en(),i={email:"",password:""},r=$({resolver:Y(Bo),defaultValues:i}),{handleSubmit:c,formState:{isSubmitting:a}}=r,d=c(async m=>{try{await Mo({username:m.email,password:m.password}),await(s==null?void 0:s()),e.refresh()}catch(u){console.error(u),o(typeof u=="string"?u:u.message)}}),l=p.jsxs(L,{gap:3,display:"flex",flexDirection:"column",children:[p.jsx(C.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),p.jsxs(L,{gap:1.5,display:"flex",flexDirection:"column",children:[p.jsx(ne,{component:Ce,href:b.auth.amplify.resetPassword,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),p.jsx(C.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:t.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:p.jsx(ie,{position:"end",children:p.jsx(oe,{onClick:t.onToggle,edge:"end",children:p.jsx(se,{icon:t.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),p.jsx(X,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:a,loadingIndicator:"Sign in...",children:"Sign in"})]});return p.jsxs(p.Fragment,{children:[p.jsx(Z,{title:"Sign in to your account",description:p.jsxs(p.Fragment,{children:["Dont have an account? ",p.jsx(ne,{component:Ce,href:b.auth.amplify.signUp,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),!!n&&p.jsx(St,{severity:"error",sx:{mb:3},children:n}),p.jsx(K,{methods:r,onSubmit:d,children:l})]})}const Oo=I.object({firstName:I.string().min(1,{message:"First name is required!"}),lastName:I.string().min(1,{message:"Last name is required!"}),email:I.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:I.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function ts(){const[e,t]=ue.useState(""),n=V(),o=be(),s={firstName:"",lastName:"",email:"",password:""},i=$({resolver:Y(Oo),defaultValues:s}),{handleSubmit:r,formState:{isSubmitting:c}}=i,a=r(async l=>{try{await _o({username:l.email,password:l.password,firstName:l.firstName,lastName:l.lastName});const m=new URLSearchParams({email:l.email}).toString(),u=`${b.auth.amplify.verify}?${m}`;n.push(u)}catch(m){console.error(m),t(typeof m=="string"?m:m.message)}}),d=p.jsxs(L,{gap:3,display:"flex",flexDirection:"column",children:[p.jsxs(L,{display:"flex",gap:{xs:3,sm:2},flexDirection:{xs:"column",sm:"row"},children:[p.jsx(C.Text,{name:"firstName",label:"First name",InputLabelProps:{shrink:!0}}),p.jsx(C.Text,{name:"lastName",label:"Last name",InputLabelProps:{shrink:!0}})]}),p.jsx(C.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),p.jsx(C.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:p.jsx(ie,{position:"end",children:p.jsx(oe,{onClick:o.onToggle,edge:"end",children:p.jsx(se,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),p.jsx(X,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:c,loadingIndicator:"Create account...",children:"Create account"})]});return p.jsxs(p.Fragment,{children:[p.jsx(Z,{title:"Get started absolutely free",description:p.jsxs(p.Fragment,{children:["Already have an account? ",p.jsx(ne,{component:Ce,href:b.auth.amplify.signIn,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),!!e&&p.jsx(St,{severity:"error",sx:{mb:3},children:e}),p.jsx(K,{methods:i,onSubmit:a,children:d}),p.jsx(on,{})]})}const jo=I.object({email:I.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function ns(){const e=V(),t={email:""},n=$({resolver:Y(jo),defaultValues:t}),{handleSubmit:o,formState:{isSubmitting:s}}=n,i=o(async c=>{try{await bt({username:c.email});const a=new URLSearchParams({email:c.email}).toString(),d=`${b.auth.amplify.updatePassword}?${a}`;e.push(d)}catch(a){console.error(a)}}),r=p.jsxs(L,{gap:3,display:"flex",flexDirection:"column",children:[p.jsx(C.Text,{autoFocus:!0,name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0}}),p.jsx(X,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:s,loadingIndicator:"Send request...",children:"Send request"})]});return p.jsxs(p.Fragment,{children:[p.jsx(Z,{icon:p.jsx(tn,{}),title:"Forgot your password?",description:"Please enter the email address associated with your account and we'll email you a link to reset your password."}),p.jsx(K,{methods:n,onSubmit:i,children:r}),p.jsx(Ue,{href:b.auth.amplify.signIn})]})}const Ho=I.object({code:I.string().min(1,{message:"Code is required!"}).min(6,{message:"Code must be at least 6 characters!"}),email:I.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:I.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"}),confirmPassword:I.string().min(1,{message:"Confirm password is required!"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match!",path:["confirmPassword"]});function os(){const e=V(),n=It().get("email"),o=be(),s=yt(5),i={code:"",email:n||"",password:"",confirmPassword:""},r=$({resolver:Y(Ho),defaultValues:i}),{watch:c,handleSubmit:a,formState:{isSubmitting:d}}=r,l=c(),m=a(async h=>{try{await Lo({username:h.email,confirmationCode:h.code,newPassword:h.password}),e.push(b.auth.amplify.signIn)}catch(g){console.error(g)}}),u=ue.useCallback(async()=>{if(!s.isCounting)try{s.reset(),s.start(),await bt({username:l.email})}catch(h){console.error(h)}},[s,l.email]),x=p.jsxs(L,{gap:3,display:"flex",flexDirection:"column",children:[p.jsx(C.Text,{name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0},disabled:!0}),p.jsx(C.Code,{name:"code"}),p.jsx(C.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:p.jsx(ie,{position:"end",children:p.jsx(oe,{onClick:o.onToggle,edge:"end",children:p.jsx(se,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),p.jsx(C.Text,{name:"confirmPassword",label:"Confirm new password",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:p.jsx(ie,{position:"end",children:p.jsx(oe,{onClick:o.onToggle,edge:"end",children:p.jsx(se,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),p.jsx(X,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:d,loadingIndicator:"Update password...",children:"Update password"})]});return p.jsxs(p.Fragment,{children:[p.jsx(Z,{icon:p.jsx(nn,{}),title:"Request sent successfully!",description:`We've sent a 6-digit confirmation email to your email. 
Please enter the code in below box to verify your email.`}),p.jsx(K,{methods:r,onSubmit:m,children:x}),p.jsx(Ut,{onResendCode:u,value:s.value,disabled:s.isCounting}),p.jsx(Ue,{href:b.auth.amplify.signIn})]})}export{es as A,ts as a,Go as b,os as c,ns as d};
